@model MvcBlog.Domain.Entities.Post

@{
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

<script type="text/javascript">
    tinymce.init({
        selector: "textarea",

        toolbar: "undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image"
    });

</script>


@using (Html.BeginForm("EditPost", "Admin", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    <div class="admin-container">

        @if (@Model.PostID != 0)
        {   //show if we are editing post
            <div class="editor-label">Post ID</div>
            <div class="text-box">@Html.EditorFor(p => p.PostID)</div>

            <div class="editor-label">Post Created By</div>
            <div class="text-box">@Html.EditorFor(p => p.PostCreatedBy)</div>

            <div class="editor-label">Post Creation Date</div>
            <div class="text-box">@Html.EditorFor(p => p.PostCreationDate)</div>

            <div class="editor-label">Post Last Modified By</div>
            <div class="text-box">@Html.EditorFor(p => p.PostLastModifiedBy)</div>

            <div class="editor-label">Post Last Modification Date</div>
            <div class="text-box">@Html.EditorFor(p => p.PostLastModificationDate)</div>
        }

        <div class="editor-label">Post Title</div>
        <div class="text-box">@Html.TextBoxFor(p => p.PostTitle, htmlAttributes: new { @class = "single-line form-control" })</div>

        <div class="editor-label">Post Description</div>
        <div>@Html.TextAreaFor(p => p.PostDescription, htmlAttributes: new { @class = "form-control", @rows = "3" })</div>

        <div class="editor-label">Post Content</div>
        <div>@Html.TextAreaFor(p => p.PostContent, htmlAttributes: new { @class = "form-control", @rows = "10" })</div>

        <div class="editor-label">Post Category</div>
        <div class="text-box">@Html.TextBoxFor(p => p.PostCategory, htmlAttributes: new { @class = "single-line form-control" })</div>

        <div class="editor-label">Post Visible?</div>
        <div>@Html.CheckBoxFor(p => p.PostIsVisible, htmlAttributes: new { @checked = "checked" })</div>

        <div class="editor-label">Comments enabled for the post?</div>
        <div>@Html.CheckBoxFor(p => p.PostCommentsEnabled, htmlAttributes: new { @checked = "checked" })</div>

        <div>Image</div>
        <div>
            @if (Model.ImageData == null)
            {
                @:None
            }
            else
            {
                <div style="float: left; margin-right: 20px">
                    <img src="@Url.Action("GetImage", "Posts", new { Model.PostID })" />
                </div>
                @*<img width="150" height="150" src="@Url.Action("GetImage", "Post", new { Model.PostID })" />*@
            }
            <div>
                Upload new image:
      <input type="file" name="image" />
            </div>
        </div>

        <p class="pull-right">
            @Html.ActionLink("Cancel", "ManagePosts", "Admin", routeValues: null, htmlAttributes: new { @class = "btn btn-warning" })<p />
        <p>
            <input type="submit" value="Save" class="btn btn-success" />
        </p>
    </div>
}

